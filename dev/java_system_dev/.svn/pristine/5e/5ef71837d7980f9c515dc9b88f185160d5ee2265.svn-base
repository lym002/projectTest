<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jsjf.dao.system.SysUserRoleVoDAO">
	<resultMap id="abatorgenerated_SysUserRoleVoResult" type="com.jsjf.model.system.SysUserRoleVo">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Aug 08 17:25:21 GMT+08:00 
			2013. -->
		<result column="GRANT_KY" property="grantKy" jdbcType="BIGINT" />
		<result column="USER_KY" property="userKy" jdbcType="BIGINT" />
		<result column="ROLE_KY" property="roleKy" jdbcType="BIGINT" />
		<result column="STATUS" property="status" jdbcType="DECIMAL" />
	</resultMap>


	<!-- 主键查询 -->
	<select id="byuserrole" parameterType="com.jsjf.model.system.SysUserRoleVo"
		resultMap="abatorgenerated_SysUserRoleVoResult">
		select * from sys_user_role where ROLE_KY = #roleKy#
	</select>



	<select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_SysUserRoleVoResult"
		parameterType="com.jsjf.model.system.SysUserRoleVo">

		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Aug 08 17:25:21 GMT+08:00 
			2013. -->
		select GRANT_KY, USER_KY, ROLE_KY, STATUS
		from sys_user_role
		<!-- <isParameterPresent > -->
		<!-- <include refid="sys_user_role.abatorgenerated_Example_Where_Clause" 
			/> -->
		<!-- <isNotNull property="orderByClause" > -->
		<!-- order by $orderByClause$ -->
		<!-- </isNotNull> -->
		<!-- </isParameterPresent> -->
	</select>

	<!--查找用户角色 对应 关系 -->
	<select id="selectByUserKy" parameterType="java.lang.Long"
		resultMap="abatorgenerated_SysUserRoleVoResult">
		select * from sys_user_role where USER_KY = #userKy:BIGINT#
	</select>
	<!--删除用户角色 对应 关系 -->
	<delete id="deleteByUserKy" parameterType="com.jsjf.model.system.SysUserRoleVo">
		delete from sys_user_role where USER_KY = #{userKy,jdbcType=BIGINT}
	</delete>

	<delete id="abatorgenerated_deleteByExample" parameterType="com.jsjf.model.system.SysUserRoleVo">
		delete from sys_user_role
	</delete>
	<insert id="insert" useGeneratedKeys="true" keyProperty="grantKy" parameterType="com.jsjf.model.system.SysUserRoleVo">
		insert into sys_user_role ( USER_KY, ROLE_KY, STATUS)
		values ( #{userKy,jdbcType=BIGINT}, #{roleKy,jdbcType=BIGINT},
		#{status,jdbcType=DECIMAL})
	</insert>
	<!-- 修改用户对应角色信息 -->
	<update id="updateByUserKy" parameterType="java.util.Map">
		update sys_user_role set 
		<if test="status != null and status != ''">
			status = #{status:DECIMAL}
		</if>
		<if test="roleKy != null and roleKy != ''">
			role_ky = #{roleKy:BIGINT}
		</if>
		where user_ky = #{userKy:BIGINT}
	</update>
	<update id="abatorgenerated_updateByExample">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Aug 08 17:25:21 GMT+08:00 
			2013. -->
		update sys_user_role
		set GRANT_KY = #record.grantKy:BIGINT#,
		USER_KY = #record.userKy:BIGINT#,
		ROLE_KY = #record.roleKy:BIGINT#,
		STATUS = #record.status:DECIMAL#
	</update>
	<select id="getMapUserRole" resultMap="abatorgenerated_SysUserRoleVoResult"
		parameterType="java.util.HashMap">
		select GRANT_KY, USER_KY, ROLE_KY, STATUS
		from sys_user_role
		<where>
			1=1
			<if test="grantKy!=null"> and GRANT_KY = #{grantKy,jdbcType=BIGINT}</if>
			<if test="userKy!=null"> and USER_KY = #{userKy,jdbcType=BIGINT}</if>
			<if test="roleKy!=null"> and ROLE_KY = #{roleKy,jdbcType=BIGINT}</if>
			<if test="status!=null"> and STATUS = #{status,jdbcType=DECIMAL}</if>
		</where>
	</select>
</mapper>